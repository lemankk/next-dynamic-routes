import t from"react";import e from"next/link";import r,{useRouter as n}from"next/router";var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var s=a((function(t,e){!function(r){var n=e&&!e.nodeType&&e,a=t&&!t.nodeType&&t,s="object"==typeof o&&o;s.global!==s&&s.window!==s&&s.self!==s||(r=s);var i,u,h=2147483647,c=/^xn--/,f=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,d=String.fromCharCode;function y(t){throw RangeError(p[t])}function m(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function b(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+m((t=t.replace(l,".")).split("."),e).join(".")}function g(t){for(var e,r,n=[],o=0,a=t.length;o<a;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<a?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function _(t){return m(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function j(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,r){var n=0;for(t=r?v(t/700):t>>1,t+=v(t/e);t>455;n+=36)t=v(t/35);return v(n+36*t/(t+38))}function w(t){var e,r,n,o,a,s,i,u,c,f,l,p=[],d=t.length,m=0,b=128,g=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&y("not-basic"),p.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<d;){for(a=m,s=1,i=36;o>=d&&y("invalid-input"),((u=(l=t.charCodeAt(o++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:36)>=36||u>v((h-m)/s))&&y("overflow"),m+=u*s,!(u<(c=i<=g?1:i>=g+26?26:i-g));i+=36)s>v(h/(f=36-c))&&y("overflow"),s*=f;g=O(m-a,e=p.length+1,0==a),v(m/e)>h-b&&y("overflow"),b+=v(m/e),m%=e,p.splice(m++,0,b)}return _(p)}function x(t){var e,r,n,o,a,s,i,u,c,f,l,p,m,b,_,w=[];for(p=(t=g(t)).length,e=128,r=0,a=72,s=0;s<p;++s)(l=t[s])<128&&w.push(d(l));for(n=o=w.length,o&&w.push("-");n<p;){for(i=h,s=0;s<p;++s)(l=t[s])>=e&&l<i&&(i=l);for(i-e>v((h-r)/(m=n+1))&&y("overflow"),r+=(i-e)*m,e=i,s=0;s<p;++s)if((l=t[s])<e&&++r>h&&y("overflow"),l==e){for(u=r,c=36;!(u<(f=c<=a?1:c>=a+26?26:c-a));c+=36)_=u-f,b=36-f,w.push(d(j(f+_%b,0))),u=v(_/b);w.push(d(j(u,0))),a=O(r,m,n==o),r=0,++n}++r,++e}return w.join("")}if(i={version:"1.3.2",ucs2:{decode:g,encode:_},decode:w,encode:x,toASCII:function(t){return b(t,(function(t){return f.test(t)?"xn--"+x(t):t}))},toUnicode:function(t){return b(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},n&&a)if(t.exports==n)a.exports=i;else for(u in i)i.hasOwnProperty(u)&&(n[u]=i[u]);else r.punycode=i}(o)})),i=function(t){return"string"==typeof t},u=function(t){return"object"==typeof t&&null!==t},h=function(t){return null===t},c=function(t){return null==t};function f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var l=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var i=t.length;s>0&&i>s&&(i=s);for(var u=0;u<i;++u){var h,c,l,p,v=t[u].replace(a,"%20"),d=v.indexOf(r);d>=0?(h=v.substr(0,d),c=v.substr(d+1)):(h=v,c=""),l=decodeURIComponent(h),p=decodeURIComponent(c),f(o,l)?Array.isArray(o[l])?o[l].push(p):o[l]=[o[l],p]:o[l]=p}return o},p=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},v=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var o=encodeURIComponent(p(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return o+encodeURIComponent(p(t))})).join(e):o+encodeURIComponent(p(t[n]))})).join(e):n?encodeURIComponent(p(n))+r+encodeURIComponent(p(t)):""},d=a((function(t,e){e.decode=e.parse=l,e.encode=e.stringify=v})),y=(d.decode,d.parse,d.encode,d.stringify,q);function m(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var b=/^([a-z0-9.+-]+:)/i,g=/:[0-9]*$/,_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,j=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),O=["'"].concat(j),w=["%","/","?",";","#"].concat(O),x=["/","?","#"],A=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},C={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function q(t,e,r){if(t&&u(t)&&t instanceof m)return t;var n=new m;return n.parse(t,e,r),n}function k(t,e){void 0===e&&(e={});for(var r=function(t){for(var e=[],r=0;r<t.length;){var n=t[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)e.push({type:"CHAR",index:r,value:t[r++]});else{var o=1,a="";if("?"===t[i=r+1])throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<t.length;)if("\\"!==t[i]){if(")"===t[i]){if(0===--o){i++;break}}else if("("===t[i]&&(o++,"?"!==t[i+1]))throw new TypeError("Capturing groups are not allowed at "+i);a+=t[i++]}else a+=t[i++]+t[i++];if(o)throw new TypeError("Unbalanced pattern at "+r);if(!a)throw new TypeError("Missing pattern at "+r);e.push({type:"PATTERN",index:r,value:a}),r=i}else{for(var s="",i=r+1;i<t.length;){var u=t.charCodeAt(i);if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;s+=t[i++]}if(!s)throw new TypeError("Missing parameter name at "+r);e.push({type:"NAME",index:r,value:s}),r=i}else e.push({type:"CLOSE",index:r,value:t[r++]});else e.push({type:"OPEN",index:r,value:t[r++]});else e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});else e.push({type:"MODIFIER",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}(t),n=e.prefixes,o=void 0===n?"./":n,a="[^"+U(e.delimiter||"/#?")+"]+?",s=[],i=0,u=0,h="",c=function(t){if(u<r.length&&r[u].type===t)return r[u++].value},f=function(t){var e=c(t);if(void 0!==e)return e;var n=r[u],o=n.type,a=n.index;throw new TypeError("Unexpected "+o+" at "+a+", expected "+t)},l=function(){for(var t,e="";t=c("CHAR")||c("ESCAPED_CHAR");)e+=t;return e};u<r.length;){var p=c("CHAR"),v=c("NAME"),d=c("PATTERN");if(v||d){var y=p||"";-1===o.indexOf(y)&&(h+=y,y=""),h&&(s.push(h),h=""),s.push({name:v||i++,prefix:y,suffix:"",pattern:d||a,modifier:c("MODIFIER")||""})}else{var m=p||c("ESCAPED_CHAR");if(m)h+=m;else if(h&&(s.push(h),h=""),c("OPEN")){y=l();var b=c("NAME")||"",g=c("PATTERN")||"",_=l();f("CLOSE"),s.push({name:b||(g?i++:""),pattern:b&&!g?a:g,prefix:y,suffix:_,modifier:c("MODIFIER")||""})}else f("END")}}return s}function I(t,e){return function(t,e){void 0===e&&(e={});var r=T(e),n=e.encode,o=void 0===n?function(t){return t}:n,a=e.validate,s=void 0===a||a,i=t.map((function(t){if("object"==typeof t)return new RegExp("^(?:"+t.pattern+")$",r)}));return function(e){for(var r="",n=0;n<t.length;n++){var a=t[n];if("string"!=typeof a){var u=e?e[a.name]:void 0,h="?"===a.modifier||"*"===a.modifier,c="*"===a.modifier||"+"===a.modifier;if(Array.isArray(u)){if(!c)throw new TypeError('Expected "'+a.name+'" to not repeat, but got an array');if(0===u.length){if(h)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var f=0;f<u.length;f++){var l=o(u[f],a);if(s&&!i[n].test(l))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but got "'+l+'"');r+=a.prefix+l+a.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!h){var p=c?"an array":"a string";throw new TypeError('Expected "'+a.name+'" to be '+p)}}else{l=o(String(u),a);if(s&&!i[n].test(l))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+l+'"');r+=a.prefix+l+a.suffix}}else r+=a}return r}}(k(t,e),e)}function U(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function T(t){return t&&t.sensitive?"":"i"}function S(t,e,r){return function(t,e,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,a=r.start,s=void 0===a||a,i=r.end,u=void 0===i||i,h=r.encode,c=void 0===h?function(t){return t}:h,f="["+U(r.endsWith||"")+"]|$",l="["+U(r.delimiter||"/#?")+"]",p=s?"^":"",v=0,d=t;v<d.length;v++){var y=d[v];if("string"==typeof y)p+=U(c(y));else{var m=U(c(y.prefix)),b=U(c(y.suffix));if(y.pattern)if(e&&e.push(y),m||b)if("+"===y.modifier||"*"===y.modifier){var g="*"===y.modifier?"?":"";p+="(?:"+m+"((?:"+y.pattern+")(?:"+b+m+"(?:"+y.pattern+"))*)"+b+")"+g}else p+="(?:"+m+"("+y.pattern+")"+b+")"+y.modifier;else p+="("+y.pattern+")"+y.modifier;else p+="(?:"+m+b+")"+y.modifier}}if(u)o||(p+=l+"?"),p+=r.endsWith?"(?="+f+")":"$";else{var _=t[t.length-1],j="string"==typeof _?l.indexOf(_[_.length-1])>-1:void 0===_;o||(p+="(?:"+l+"(?="+f+"))?"),j||(p+="(?="+l+"|"+f+")")}return new RegExp(p,T(r))}(k(t,r),e,r)}function z(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return t}(t,e):Array.isArray(t)?function(t,e,r){var n=t.map((function(t){return z(t,e,r).source}));return new RegExp("(?:"+n.join("|")+")",T(r))}(t,e,r):S(t,e,r)}m.prototype.parse=function(t,e,r){if(!i(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=-1!==n&&n<t.indexOf("#")?"?":"#",a=t.split(o);a[0]=a[0].replace(/\\/g,"/");var u=t=a.join(o);if(u=u.trim(),!r&&1===t.split("#").length){var h=_.exec(u);if(h)return this.path=u,this.href=u,this.pathname=h[1],h[2]?(this.search=h[2],this.query=e?d.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=b.exec(u);if(c){var f=(c=c[0]).toLowerCase();this.protocol=f,u=u.substr(c.length)}if(r||c||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===u.substr(0,2);!l||c&&C[c]||(u=u.substr(2),this.slashes=!0)}if(!C[c]&&(l||c&&!P[c])){for(var p,v,y=-1,m=0;m<x.length;m++){-1!==(g=u.indexOf(x[m]))&&(-1===y||g<y)&&(y=g)}-1!==(v=-1===y?u.lastIndexOf("@"):u.lastIndexOf("@",y))&&(p=u.slice(0,v),u=u.slice(v+1),this.auth=decodeURIComponent(p)),y=-1;for(m=0;m<w.length;m++){var g;-1!==(g=u.indexOf(w[m]))&&(-1===y||g<y)&&(y=g)}-1===y&&(y=u.length),this.host=u.slice(0,y),u=u.slice(y),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var q=this.hostname.split(/\./),k=(m=0,q.length);m<k;m++){var I=q[m];if(I&&!I.match(A)){for(var U="",T=0,S=I.length;T<S;T++)I.charCodeAt(T)>127?U+="x":U+=I[T];if(!U.match(A)){var z=q.slice(0,m),N=q.slice(m+1),$=I.match(E);$&&(z.push($[1]),N.unshift($[2])),N.length&&(u="/"+N.join(".")+u),this.hostname=z.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=s.toASCII(this.hostname));var M=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+M,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!R[f])for(m=0,k=O.length;m<k;m++){var D=O[m];if(-1!==u.indexOf(D)){var H=encodeURIComponent(D);H===D&&(H=escape(D)),u=u.split(D).join(H)}}var L=u.indexOf("#");-1!==L&&(this.hash=u.substr(L),u=u.slice(0,L));var B=u.indexOf("?");if(-1!==B?(this.search=u.substr(B),this.query=u.substr(B+1),e&&(this.query=d.parse(this.query)),u=u.slice(0,B)):e&&(this.search="",this.query={}),u&&(this.pathname=u),P[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var G=this.search||"";this.path=M+G}return this.href=this.format(),this},m.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(a=d.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||P[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+n},m.prototype.resolve=function(t){return this.resolveObject(q(t,!1,!0)).format()},m.prototype.resolveObject=function(t){if(i(t)){var e=new m;e.parse(t,!1,!0),t=e}for(var r=new m,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var f=s[u];"protocol"!==f&&(r[f]=t[f])}return P[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!P[t.protocol]){for(var l=Object.keys(t),p=0;p<l.length;p++){var v=l[p];r[v]=t[v]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||C[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",b=r.search||"";r.path=y+b}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),j=_||g||r.host&&t.pathname,O=j,w=r.pathname&&r.pathname.split("/")||[],x=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!P[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),j=j&&(""===d[0]||""===w[0])),_)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),r.search=t.search,r.query=t.query;else if(!c(t.search)){if(x)r.hostname=r.host=w.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift());return r.search=t.search,r.query=t.query,h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=w.slice(-1)[0],E=(r.host||t.host||w.length>1)&&("."===A||".."===A)||""===A,R=0,q=w.length;q>=0;q--)"."===(A=w[q])?w.splice(q,1):".."===A?(w.splice(q,1),R++):R&&(w.splice(q,1),R--);if(!j&&!O)for(;R--;R)w.unshift("..");!j||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),E&&"/"!==w.join("/").substr(-1)&&w.push("");var k,I=""===w[0]||w[0]&&"/"===w[0].charAt(0);x&&(r.hostname=r.host=I?"":w.length?w.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift()));return(j=j||r.host&&w.length)&&!I&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},m.prototype.parseHost=function(){var t=this.host,e=g.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const N=t=>Object.keys(t).filter(e=>null!==t[e]&&void 0!==t[e]).map(e=>{let r=t[e];return Array.isArray(r)&&(r=r.join("/")),[encodeURIComponent(e),encodeURIComponent(r)].join("=")}).join("&");class ${constructor(t){const{name:e,pattern:r,page:n=e}=t;if(!e&&!n)throw new Error(`Missing page to render for route "${r}"`);this.name=e,n&&this.updatePage(n),r&&this.updatePattern(r)}updatePattern(t){this.pattern!==t&&(this.pattern=t||"/"+this.name,this.regex=z(this.pattern,this.keys=[]),this.keyNames=this.keys.map(t=>t.name),this.toPath=I(this.pattern))}updatePage(t=""){this.page!==t&&(this.page=(""+t).replace(/(^|\/)index$/,"").replace(/^\/?/,"/"))}match(t){const e=this.regex.exec(t);if(e)return this.valuesToParams(e.slice(1))}valuesToParams(t){return t.reduce((t,e,r)=>void 0===e?t:Object.assign(t,{[this.keys[r].name]:decodeURIComponent(e)}),{})}getHref(t={}){return`${this.page}?${N(t)}`}getAs(t={}){const e=this.toPath(t)||"/",r=Object.keys(t).filter(t=>-1===this.keyNames.indexOf(t));if(!r.length)return e;const n=r.reduce((e,r)=>Object.assign(e,{[r]:t[r]}),{});return`${e}?${N(n)}`}getUrls(t){return{as:this.getAs(t),href:this.getHref(t)}}}class M{constructor(){this._routes=[],this._callbacks={},this._routes=[]}get routes(){return this._routes}on(t,e){return this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),()=>{this.off(t,e)}}off(t,e){const r=this._callbacks[t].findIndex(t=>t===e);r>=0&&(this._callbacks[t]=this._callbacks[t].splice(r,1))}emit(t,...e){const r=this._callbacks[t];r&&r.forEach(t=>t.call(null,e))}createOption(t,e,r){let n={},o=t;return t instanceof Object?o=n.name:("/"===t[0]&&(r=e,e=t,o=null),n={name:o,pattern:e,page:r}),n}add(t,e,r){const n=t instanceof Object?t:this.createOption(t,e,r);if(this.findByName(n.name))throw new Error(`Route "${n.name}" already exists`);return this._routes.push(new $(n)),this.emit("change"),this}set(t,e,r){const n=t instanceof Object?t:this.createOption(t,e,r),o=this.findByName(n.name);return o?(n.pattern&&o.updatePattern(n.pattern),n.page&&o.updatePage(n.page)):this._routes.push(new $(n)),this.emit("change"),this}findByName(t){return t?this._routes.filter(e=>e.name===t)[0]:null}match(t){const e=y(t,!0),{pathname:r,query:n}=e;return this._routes.reduce((t,e)=>{if(t.route)return t;const o=e.match(r);return o?Object.assign(Object.assign({},t),{route:e,params:o,query:Object.assign(Object.assign({},n),o)}):t},{route:null,query:n,parsedUrl:e})}findAndGetUrls(t,e={}){const r=this.findByName(t);if(r)return{route:r,urls:r.getUrls(e),byName:!0};{const{route:e,query:r}=this.match(t),n=e?e.getHref(r):t;return{route:e,urls:{href:n,as:t,query:r},byName:!1}}}getRequestHandler(t,e=null){const r=t.getRequestHandler();return(n,o,a=null)=>{const{route:s,query:i,parsedUrl:u}=this.match(n.url);s?e?e({req:n,res:o,route:s,query:a?a({req:n,query:i,route:s}):i,parsedUrl:u}):t.render(n,o,s.page,a?a({req:n,query:i,route:s}):i,u):r(n,o,u)}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F=function(){this.__data__=[],this.size=0};var D=function(t,e){return t===e||t!=t&&e!=e};var H=function(t,e){for(var r=t.length;r--;)if(D(t[r][0],e))return r;return-1},L=Array.prototype.splice;var B=function(t){var e=this.__data__,r=H(e,t);return!(r<0)&&(r==e.length-1?e.pop():L.call(e,r,1),--this.size,!0)};var G=function(t){var e=this.__data__,r=H(e,t);return r<0?void 0:e[r][1]};var W=function(t){return H(this.__data__,t)>-1};var V=function(t,e){var r=this.__data__,n=H(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=F,K.prototype.delete=B,K.prototype.get=G,K.prototype.has=W,K.prototype.set=V;var Z=K;var J=function(){this.__data__=new Z,this.size=0};var Q=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var X=function(t){return this.__data__.get(t)};var Y=function(t){return this.__data__.has(t)},tt="object"==typeof o&&o&&o.Object===Object&&o,et="object"==typeof self&&self&&self.Object===Object&&self,rt=tt||et||Function("return this")(),nt=rt.Symbol,ot=Object.prototype,at=ot.hasOwnProperty,st=ot.toString,it=nt?nt.toStringTag:void 0;var ut=function(t){var e=at.call(t,it),r=t[it];try{t[it]=void 0;var n=!0}catch(t){}var o=st.call(t);return n&&(e?t[it]=r:delete t[it]),o},ht=Object.prototype.toString;var ct=function(t){return ht.call(t)},ft=nt?nt.toStringTag:void 0;var lt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ft&&ft in Object(t)?ut(t):ct(t)};var pt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var vt,dt=function(t){if(!pt(t))return!1;var e=lt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},yt=rt["__core-js_shared__"],mt=(vt=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||""))?"Symbol(src)_1."+vt:"";var bt=function(t){return!!mt&&mt in t},gt=Function.prototype.toString;var _t=function(t){if(null!=t){try{return gt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},jt=/^\[object .+?Constructor\]$/,Ot=Function.prototype,wt=Object.prototype,xt=Ot.toString,At=wt.hasOwnProperty,Et=RegExp("^"+xt.call(At).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Rt=function(t){return!(!pt(t)||bt(t))&&(dt(t)?Et:jt).test(_t(t))};var Ct=function(t,e){return null==t?void 0:t[e]};var Pt=function(t,e){var r=Ct(t,e);return Rt(r)?r:void 0},qt=Pt(rt,"Map"),kt=Pt(Object,"create");var It=function(){this.__data__=kt?kt(null):{},this.size=0};var Ut=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Tt=Object.prototype.hasOwnProperty;var St=function(t){var e=this.__data__;if(kt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Tt.call(e,t)?e[t]:void 0},zt=Object.prototype.hasOwnProperty;var Nt=function(t){var e=this.__data__;return kt?void 0!==e[t]:zt.call(e,t)};var $t=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=kt&&void 0===e?"__lodash_hash_undefined__":e,this};function Mt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Mt.prototype.clear=It,Mt.prototype.delete=Ut,Mt.prototype.get=St,Mt.prototype.has=Nt,Mt.prototype.set=$t;var Ft=Mt;var Dt=function(){this.size=0,this.__data__={hash:new Ft,map:new(qt||Z),string:new Ft}};var Ht=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Lt=function(t,e){var r=t.__data__;return Ht(e)?r["string"==typeof e?"string":"hash"]:r.map};var Bt=function(t){var e=Lt(this,t).delete(t);return this.size-=e?1:0,e};var Gt=function(t){return Lt(this,t).get(t)};var Wt=function(t){return Lt(this,t).has(t)};var Vt=function(t,e){var r=Lt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Kt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Kt.prototype.clear=Dt,Kt.prototype.delete=Bt,Kt.prototype.get=Gt,Kt.prototype.has=Wt,Kt.prototype.set=Vt;var Zt=Kt;var Jt=function(t,e){var r=this.__data__;if(r instanceof Z){var n=r.__data__;if(!qt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Zt(n)}return r.set(t,e),this.size=r.size,this};function Qt(t){var e=this.__data__=new Z(t);this.size=e.size}Qt.prototype.clear=J,Qt.prototype.delete=Q,Qt.prototype.get=X,Qt.prototype.has=Y,Qt.prototype.set=Jt;var Xt=Qt;var Yt=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var te=function(t){return this.__data__.has(t)};function ee(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Zt;++e<r;)this.add(t[e])}ee.prototype.add=ee.prototype.push=Yt,ee.prototype.has=te;var re=ee;var ne=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var oe=function(t,e){return t.has(e)};var ae=function(t,e,r,n,o,a){var s=1&r,i=t.length,u=e.length;if(i!=u&&!(s&&u>i))return!1;var h=a.get(t);if(h&&a.get(e))return h==e;var c=-1,f=!0,l=2&r?new re:void 0;for(a.set(t,e),a.set(e,t);++c<i;){var p=t[c],v=e[c];if(n)var d=s?n(v,p,c,e,t,a):n(p,v,c,t,e,a);if(void 0!==d){if(d)continue;f=!1;break}if(l){if(!ne(e,(function(t,e){if(!oe(l,e)&&(p===t||o(p,t,r,n,a)))return l.push(e)}))){f=!1;break}}else if(p!==v&&!o(p,v,r,n,a)){f=!1;break}}return a.delete(t),a.delete(e),f},se=rt.Uint8Array;var ie=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var ue=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},he=nt?nt.prototype:void 0,ce=he?he.valueOf:void 0;var fe=function(t,e,r,n,o,a,s){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new se(t),new se(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return D(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var i=ie;case"[object Set]":var u=1&n;if(i||(i=ue),t.size!=e.size&&!u)return!1;var h=s.get(t);if(h)return h==e;n|=2,s.set(t,e);var c=ae(i(t),i(e),n,o,a,s);return s.delete(t),c;case"[object Symbol]":if(ce)return ce.call(t)==ce.call(e)}return!1};var le=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},pe=Array.isArray;var ve=function(t,e,r){var n=e(t);return pe(t)?n:le(n,r(t))};var de=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[o++]=s)}return a};var ye=function(){return[]},me=Object.prototype.propertyIsEnumerable,be=Object.getOwnPropertySymbols,ge=be?function(t){return null==t?[]:(t=Object(t),de(be(t),(function(e){return me.call(t,e)})))}:ye;var _e=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var je=function(t){return null!=t&&"object"==typeof t};var Oe=function(t){return je(t)&&"[object Arguments]"==lt(t)},we=Object.prototype,xe=we.hasOwnProperty,Ae=we.propertyIsEnumerable,Ee=Oe(function(){return arguments}())?Oe:function(t){return je(t)&&xe.call(t,"callee")&&!Ae.call(t,"callee")};var Re=function(){return!1},Ce=a((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?rt.Buffer:void 0,a=(o?o.isBuffer:void 0)||Re;t.exports=a})),Pe=/^(?:0|[1-9]\d*)$/;var qe=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Pe.test(t))&&t>-1&&t%1==0&&t<e};var ke=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Ie={};Ie["[object Float32Array]"]=Ie["[object Float64Array]"]=Ie["[object Int8Array]"]=Ie["[object Int16Array]"]=Ie["[object Int32Array]"]=Ie["[object Uint8Array]"]=Ie["[object Uint8ClampedArray]"]=Ie["[object Uint16Array]"]=Ie["[object Uint32Array]"]=!0,Ie["[object Arguments]"]=Ie["[object Array]"]=Ie["[object ArrayBuffer]"]=Ie["[object Boolean]"]=Ie["[object DataView]"]=Ie["[object Date]"]=Ie["[object Error]"]=Ie["[object Function]"]=Ie["[object Map]"]=Ie["[object Number]"]=Ie["[object Object]"]=Ie["[object RegExp]"]=Ie["[object Set]"]=Ie["[object String]"]=Ie["[object WeakMap]"]=!1;var Ue=function(t){return je(t)&&ke(t.length)&&!!Ie[lt(t)]};var Te=function(t){return function(e){return t(e)}},Se=a((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&tt.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a})),ze=Se&&Se.isTypedArray,Ne=ze?Te(ze):Ue,$e=Object.prototype.hasOwnProperty;var Me=function(t,e){var r=pe(t),n=!r&&Ee(t),o=!r&&!n&&Ce(t),a=!r&&!n&&!o&&Ne(t),s=r||n||o||a,i=s?_e(t.length,String):[],u=i.length;for(var h in t)!e&&!$e.call(t,h)||s&&("length"==h||o&&("offset"==h||"parent"==h)||a&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||qe(h,u))||i.push(h);return i},Fe=Object.prototype;var De=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Fe)};var He=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Le=Object.prototype.hasOwnProperty;var Be=function(t){if(!De(t))return He(t);var e=[];for(var r in Object(t))Le.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Ge=function(t){return null!=t&&ke(t.length)&&!dt(t)};var We=function(t){return Ge(t)?Me(t):Be(t)};var Ve=function(t){return ve(t,We,ge)},Ke=Object.prototype.hasOwnProperty;var Ze=function(t,e,r,n,o,a){var s=1&r,i=Ve(t),u=i.length;if(u!=Ve(e).length&&!s)return!1;for(var h=u;h--;){var c=i[h];if(!(s?c in e:Ke.call(e,c)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var l=!0;a.set(t,e),a.set(e,t);for(var p=s;++h<u;){var v=t[c=i[h]],d=e[c];if(n)var y=s?n(d,v,c,e,t,a):n(v,d,c,t,e,a);if(!(void 0===y?v===d||o(v,d,r,n,a):y)){l=!1;break}p||(p="constructor"==c)}if(l&&!p){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(l=!1)}return a.delete(t),a.delete(e),l},Je=Pt(rt,"DataView"),Qe=Pt(rt,"Promise"),Xe=Pt(rt,"Set"),Ye=Pt(rt,"WeakMap"),tr=_t(Je),er=_t(qt),rr=_t(Qe),nr=_t(Xe),or=_t(Ye),ar=lt;(Je&&"[object DataView]"!=ar(new Je(new ArrayBuffer(1)))||qt&&"[object Map]"!=ar(new qt)||Qe&&"[object Promise]"!=ar(Qe.resolve())||Xe&&"[object Set]"!=ar(new Xe)||Ye&&"[object WeakMap]"!=ar(new Ye))&&(ar=function(t){var e=lt(t),r="[object Object]"==e?t.constructor:void 0,n=r?_t(r):"";if(n)switch(n){case tr:return"[object DataView]";case er:return"[object Map]";case rr:return"[object Promise]";case nr:return"[object Set]";case or:return"[object WeakMap]"}return e});var sr=ar,ir=Object.prototype.hasOwnProperty;var ur=function(t,e,r,n,o,a){var s=pe(t),i=pe(e),u=s?"[object Array]":sr(t),h=i?"[object Array]":sr(e),c="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f="[object Object]"==(h="[object Arguments]"==h?"[object Object]":h),l=u==h;if(l&&Ce(t)){if(!Ce(e))return!1;s=!0,c=!1}if(l&&!c)return a||(a=new Xt),s||Ne(t)?ae(t,e,r,n,o,a):fe(t,e,u,r,n,o,a);if(!(1&r)){var p=c&&ir.call(t,"__wrapped__"),v=f&&ir.call(e,"__wrapped__");if(p||v){var d=p?t.value():t,y=v?e.value():e;return a||(a=new Xt),o(d,y,r,n,a)}}return!!l&&(a||(a=new Xt),Ze(t,e,r,n,o,a))};var hr=function t(e,r,n,o,a){return e===r||(null==e||null==r||!je(e)&&!je(r)?e!=e&&r!=r:ur(e,r,n,o,t,a))};var cr=function(t,e){return hr(t,e)};function fr(r,n=null){const o=n||e;return function(e){const{route:n,params:a,to:s}=e,i=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}(e,["route","params","to"]),u=n||s,h=function(e,r,n={}){const o=r?e.findAndGetUrls(r,n):{route:null,urls:{as:"",href:"",query:{}},byName:!1},[a,s]=t.useState(o.urls);return t.useEffect(()=>{const t=e.on("change",()=>{const t=r?e.findAndGetUrls(r,n):{route:null,urls:{as:"",href:"",query:{}},byName:!1};t.urls&&cr(a,t.urls)||s(t.urls)});return()=>{t()}},[]),o}(r,u,a);let c=i;return h&&Object.assign(c,h.urls),c.href||(c.href=u),c.params||(c.params=a),t.createElement(o,Object.assign({},c))}}export default t=>{const{Link:e=null,Router:o=null}=t||{},a=new M,s=function(t){return()=>{const e=n();return{matches:t.findAndGetUrls(e.asPath,e.query)}}}(a),i=fr(a,e),u=function(t,e=null){const n=e||r,o=Object.assign({},n),a=e=>(r,o,a)=>{const s=n[e];if(s){const{byName:e,urls:{as:n,href:i}}=t.findAndGetUrls(r,o);return s(i,n,e?a:o)}};return o.pushRoute=a("push"),o.replaceRoute=a("replace"),o.prefetchRoute=a("prefetch"),o}(a,o);return{registry:a,Link:i,Router:u,useRouteRegistry:s}};export{$ as Route,N as toQuerystring};
//# sourceMappingURL=index.es.min.js.map
