import t from"react";import e from"next/link";import r,{useRouter as n}from"next/router";var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var a=o((function(t,e){!function(r){var n=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,a="object"==typeof s&&s;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var i,h,u=2147483647,f=/^xn--/,l=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,d=String.fromCharCode;function v(t){throw RangeError(c[t])}function g(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function y(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+g((t=t.replace(p,".")).split("."),e).join(".")}function b(t){for(var e,r,n=[],s=0,o=t.length;s<o;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<o?56320==(64512&(r=t.charCodeAt(s++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),s--):n.push(e);return n}function x(t){return g(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,r){var n=0;for(t=r?m(t/700):t>>1,t+=m(t/e);t>455;n+=36)t=m(t/35);return m(n+36*t/(t+38))}function E(t){var e,r,n,s,o,a,i,h,f,l,p,c=[],d=t.length,g=0,y=128,b=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&v("not-basic"),c.push(t.charCodeAt(n));for(s=r>0?r+1:0;s<d;){for(o=g,a=1,i=36;s>=d&&v("invalid-input"),((h=(p=t.charCodeAt(s++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||h>m((u-g)/a))&&v("overflow"),g+=h*a,!(h<(f=i<=b?1:i>=b+26?26:i-b));i+=36)a>m(u/(l=36-f))&&v("overflow"),a*=l;b=O(g-o,e=c.length+1,0==o),m(g/e)>u-y&&v("overflow"),y+=m(g/e),g%=e,c.splice(g++,0,y)}return x(c)}function A(t){var e,r,n,s,o,a,i,h,f,l,p,c,g,y,x,E=[];for(c=(t=b(t)).length,e=128,r=0,o=72,a=0;a<c;++a)(p=t[a])<128&&E.push(d(p));for(n=s=E.length,s&&E.push("-");n<c;){for(i=u,a=0;a<c;++a)(p=t[a])>=e&&p<i&&(i=p);for(i-e>m((u-r)/(g=n+1))&&v("overflow"),r+=(i-e)*g,e=i,a=0;a<c;++a)if((p=t[a])<e&&++r>u&&v("overflow"),p==e){for(h=r,f=36;!(h<(l=f<=o?1:f>=o+26?26:f-o));f+=36)x=h-l,y=36-l,E.push(d(w(l+x%y,0))),h=m(x/y);E.push(d(w(h,0))),o=O(r,g,n==s),r=0,++n}++r,++e}return E.join("")}if(i={version:"1.3.2",ucs2:{decode:b,encode:x},decode:E,encode:A,toASCII:function(t){return y(t,(function(t){return l.test(t)?"xn--"+A(t):t}))},toUnicode:function(t){return y(t,(function(t){return f.test(t)?E(t.slice(4).toLowerCase()):t}))}},n&&o)if(t.exports==n)o.exports=i;else for(h in i)i.hasOwnProperty(h)&&(n[h]=i[h]);else r.punycode=i}(s)})),i=function(t){return"string"==typeof t},h=function(t){return"object"==typeof t&&null!==t},u=function(t){return null===t},f=function(t){return null==t};function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var p=function(t,e,r,n){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var o=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var i=t.length;a>0&&i>a&&(i=a);for(var h=0;h<i;++h){var u,f,p,c,m=t[h].replace(o,"%20"),d=m.indexOf(r);d>=0?(u=m.substr(0,d),f=m.substr(d+1)):(u=m,f=""),p=decodeURIComponent(u),c=decodeURIComponent(f),l(s,p)?Array.isArray(s[p])?s[p].push(c):s[p]=[s[p],c]:s[p]=c}return s},c=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},m=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var s=encodeURIComponent(c(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return s+encodeURIComponent(c(t))})).join(e):s+encodeURIComponent(c(t[n]))})).join(e):n?encodeURIComponent(c(n))+r+encodeURIComponent(c(t)):""},d=o((function(t,e){e.decode=e.parse=p,e.encode=e.stringify=m})),v=(d.decode,d.parse,d.encode,d.stringify,U);function g(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var y=/^([a-z0-9.+-]+:)/i,b=/:[0-9]*$/,x=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,w=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),O=["'"].concat(w),E=["%","/","?",";","#"].concat(O),A=["/","?","#"],j=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,C={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function U(t,e,r){if(t&&h(t)&&t instanceof g)return t;var n=new g;return n.parse(t,e,r),n}function k(t,e){void 0===e&&(e={});for(var r=function(t){for(var e=[],r=0;r<t.length;){var n=t[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)e.push({type:"CHAR",index:r,value:t[r++]});else{var s=1,o="";if("?"===t[i=r+1])throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<t.length;)if("\\"!==t[i]){if(")"===t[i]){if(0===--s){i++;break}}else if("("===t[i]&&(s++,"?"!==t[i+1]))throw new TypeError("Capturing groups are not allowed at "+i);o+=t[i++]}else o+=t[i++]+t[i++];if(s)throw new TypeError("Unbalanced pattern at "+r);if(!o)throw new TypeError("Missing pattern at "+r);e.push({type:"PATTERN",index:r,value:o}),r=i}else{for(var a="",i=r+1;i<t.length;){var h=t.charCodeAt(i);if(!(h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||95===h))break;a+=t[i++]}if(!a)throw new TypeError("Missing parameter name at "+r);e.push({type:"NAME",index:r,value:a}),r=i}else e.push({type:"CLOSE",index:r,value:t[r++]});else e.push({type:"OPEN",index:r,value:t[r++]});else e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});else e.push({type:"MODIFIER",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}(t),n=e.prefixes,s=void 0===n?"./":n,o="[^"+T(e.delimiter||"/#?")+"]+?",a=[],i=0,h=0,u="",f=function(t){if(h<r.length&&r[h].type===t)return r[h++].value},l=function(t){var e=f(t);if(void 0!==e)return e;var n=r[h],s=n.type,o=n.index;throw new TypeError("Unexpected "+s+" at "+o+", expected "+t)},p=function(){for(var t,e="";t=f("CHAR")||f("ESCAPED_CHAR");)e+=t;return e};h<r.length;){var c=f("CHAR"),m=f("NAME"),d=f("PATTERN");if(m||d){var v=c||"";-1===s.indexOf(v)&&(u+=v,v=""),u&&(a.push(u),u=""),a.push({name:m||i++,prefix:v,suffix:"",pattern:d||o,modifier:f("MODIFIER")||""})}else{var g=c||f("ESCAPED_CHAR");if(g)u+=g;else if(u&&(a.push(u),u=""),f("OPEN")){v=p();var y=f("NAME")||"",b=f("PATTERN")||"",x=p();l("CLOSE"),a.push({name:y||(b?i++:""),pattern:y&&!b?o:b,prefix:v,suffix:x,modifier:f("MODIFIER")||""})}else l("END")}}return a}function P(t,e){return function(t,e){void 0===e&&(e={});var r=N(e),n=e.encode,s=void 0===n?function(t){return t}:n,o=e.validate,a=void 0===o||o,i=t.map((function(t){if("object"==typeof t)return new RegExp("^(?:"+t.pattern+")$",r)}));return function(e){for(var r="",n=0;n<t.length;n++){var o=t[n];if("string"!=typeof o){var h=e?e[o.name]:void 0,u="?"===o.modifier||"*"===o.modifier,f="*"===o.modifier||"+"===o.modifier;if(Array.isArray(h)){if(!f)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===h.length){if(u)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var l=0;l<h.length;l++){var p=s(h[l],o);if(a&&!i[n].test(p))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+p+'"');r+=o.prefix+p+o.suffix}}else if("string"!=typeof h&&"number"!=typeof h){if(!u){var c=f?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+c)}}else{p=s(String(h),o);if(a&&!i[n].test(p))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+p+'"');r+=o.prefix+p+o.suffix}}else r+=o}return r}}(k(t,e),e)}function T(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function N(t){return t&&t.sensitive?"":"i"}function _(t,e,r){return function(t,e,r){void 0===r&&(r={});for(var n=r.strict,s=void 0!==n&&n,o=r.start,a=void 0===o||o,i=r.end,h=void 0===i||i,u=r.encode,f=void 0===u?function(t){return t}:u,l="["+T(r.endsWith||"")+"]|$",p="["+T(r.delimiter||"/#?")+"]",c=a?"^":"",m=0,d=t;m<d.length;m++){var v=d[m];if("string"==typeof v)c+=T(f(v));else{var g=T(f(v.prefix)),y=T(f(v.suffix));if(v.pattern)if(e&&e.push(v),g||y)if("+"===v.modifier||"*"===v.modifier){var b="*"===v.modifier?"?":"";c+="(?:"+g+"((?:"+v.pattern+")(?:"+y+g+"(?:"+v.pattern+"))*)"+y+")"+b}else c+="(?:"+g+"("+v.pattern+")"+y+")"+v.modifier;else c+="("+v.pattern+")"+v.modifier;else c+="(?:"+g+y+")"+v.modifier}}if(h)s||(c+=p+"?"),c+=r.endsWith?"(?="+l+")":"$";else{var x=t[t.length-1],w="string"==typeof x?p.indexOf(x[x.length-1])>-1:void 0===x;s||(c+="(?:"+p+"(?="+l+"))?"),w||(c+="(?="+p+"|"+l+")")}return new RegExp(c,N(r))}(k(t,r),e,r)}function $(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return t}(t,e):Array.isArray(t)?function(t,e,r){var n=t.map((function(t){return $(t,e,r).source}));return new RegExp("(?:"+n.join("|")+")",N(r))}(t,e,r):_(t,e,r)}g.prototype.parse=function(t,e,r){if(!i(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),s=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(s);o[0]=o[0].replace(/\\/g,"/");var h=t=o.join(s);if(h=h.trim(),!r&&1===t.split("#").length){var u=x.exec(h);if(u)return this.path=h,this.href=h,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?d.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=y.exec(h);if(f){var l=(f=f[0]).toLowerCase();this.protocol=l,h=h.substr(f.length)}if(r||f||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===h.substr(0,2);!p||f&&q[f]||(h=h.substr(2),this.slashes=!0)}if(!q[f]&&(p||f&&!I[f])){for(var c,m,v=-1,g=0;g<A.length;g++){-1!==(b=h.indexOf(A[g]))&&(-1===v||b<v)&&(v=b)}-1!==(m=-1===v?h.lastIndexOf("@"):h.lastIndexOf("@",v))&&(c=h.slice(0,m),h=h.slice(m+1),this.auth=decodeURIComponent(c)),v=-1;for(g=0;g<E.length;g++){var b;-1!==(b=h.indexOf(E[g]))&&(-1===v||b<v)&&(v=b)}-1===v&&(v=h.length),this.host=h.slice(0,v),h=h.slice(v),this.parseHost(),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w)for(var U=this.hostname.split(/\./),k=(g=0,U.length);g<k;g++){var P=U[g];if(P&&!P.match(j)){for(var T="",N=0,_=P.length;N<_;N++)P.charCodeAt(N)>127?T+="x":T+=P[N];if(!T.match(j)){var $=U.slice(0,g),H=U.slice(g+1),S=P.match(R);S&&($.push(S[1]),H.unshift(S[2])),H.length&&(h="/"+H.join(".")+h),this.hostname=$.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=a.toASCII(this.hostname));var M=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+M,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!C[l])for(g=0,k=O.length;g<k;g++){var F=O[g];if(-1!==h.indexOf(F)){var L=encodeURIComponent(F);L===F&&(L=escape(F)),h=h.split(F).join(L)}}var G=h.indexOf("#");-1!==G&&(this.hash=h.substr(G),h=h.slice(0,G));var B=h.indexOf("?");if(-1!==B?(this.search=h.substr(B),this.query=h.substr(B+1),e&&(this.query=d.parse(this.query)),h=h.slice(0,B)):e&&(this.search="",this.query={}),h&&(this.pathname=h),I[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var z=this.search||"";this.path=M+z}return this.href=this.format(),this},g.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(o=d.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||I[e])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},g.prototype.resolve=function(t){return this.resolveObject(U(t,!1,!0)).format()},g.prototype.resolveObject=function(t){if(i(t)){var e=new g;e.parse(t,!1,!0),t=e}for(var r=new g,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var l=a[h];"protocol"!==l&&(r[l]=t[l])}return I[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!I[t.protocol]){for(var p=Object.keys(t),c=0;c<p.length;c++){var m=p[c];r[m]=t[m]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||q[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=x||b||r.host&&t.pathname,O=w,E=r.pathname&&r.pathname.split("/")||[],A=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!I[r.protocol]);if(A&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===E[0])),x)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),r.search=t.search,r.query=t.query;else if(!f(t.search)){if(A)r.hostname=r.host=E.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift());return r.search=t.search,r.query=t.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var j=E.slice(-1)[0],R=(r.host||t.host||E.length>1)&&("."===j||".."===j)||""===j,C=0,U=E.length;U>=0;U--)"."===(j=E[U])?E.splice(U,1):".."===j?(E.splice(U,1),C++):C&&(E.splice(U,1),C--);if(!w&&!O)for(;C--;C)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),R&&"/"!==E.join("/").substr(-1)&&E.push("");var k,P=""===E[0]||E[0]&&"/"===E[0].charAt(0);A&&(r.hostname=r.host=P?"":E.length?E.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift()));return(w=w||r.host&&E.length)&&!P&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},g.prototype.parseHost=function(){var t=this.host,e=b.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const H=t=>Object.keys(t).filter(e=>null!==t[e]&&void 0!==t[e]).map(e=>{let r=t[e];return Array.isArray(r)&&(r=r.join("/")),[encodeURIComponent(e),encodeURIComponent(r)].join("=")}).join("&");class S{constructor(t){const{name:e,pattern:r,page:n=e}=t;if(!e&&!n)throw new Error(`Missing page to render for route "${r}"`);this.name=e,n&&this.updatePage(n),r&&this.updatePattern(r)}updatePattern(t){this.pattern!==t&&(this.pattern=t||"/"+this.name,this.regex=$(this.pattern,this.keys=[]),this.keyNames=this.keys.map(t=>t.name),this.toPath=P(this.pattern))}updatePage(t=""){this.page!==t&&(this.page=(""+t).replace(/(^|\/)index$/,"").replace(/^\/?/,"/"))}match(t){const e=this.regex.exec(t);if(e)return this.valuesToParams(e.slice(1))}valuesToParams(t){return t.reduce((t,e,r)=>void 0===e?t:Object.assign(t,{[this.keys[r].name]:decodeURIComponent(e)}),{})}getHref(t={}){return`${this.page}?${H(t)}`}getAs(t={}){const e=this.toPath(t)||"/",r=Object.keys(t).filter(t=>-1===this.keyNames.indexOf(t));if(!r.length)return e;const n=r.reduce((e,r)=>Object.assign(e,{[r]:t[r]}),{});return`${e}?${H(n)}`}getUrls(t){return{as:this.getAs(t),href:this.getHref(t)}}}class M{constructor(){this._routes=[],this._callbacks={},this._routes=[]}get routes(){return this._routes}on(t,e){return this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),()=>{this.off(t,e)}}off(t,e){const r=this._callbacks[t].findIndex(t=>t===e);r>=0&&(this._callbacks[t]=this._callbacks[t].splice(r,1))}emit(t,...e){const r=this._callbacks[t];r&&r.forEach(t=>t.call(null,e))}createOption(t,e,r){let n={},s=t;return t instanceof Object?s=n.name:("/"===t[0]&&(r=e,e=t,s=null),n={name:s,pattern:e,page:r}),n}add(t,e,r){const n=t instanceof Object?t:this.createOption(t,e,r);if(this.findByName(n.name))throw new Error(`Route "${n.name}" already exists`);return this._routes.push(new S(n)),this.emit("change"),this}set(t,e,r){const n=t instanceof Object?t:this.createOption(t,e,r),s=this.findByName(n.name);return s?(n.pattern&&s.updatePattern(n.pattern),n.page&&s.updatePage(n.page)):this._routes.push(new S(n)),this.emit("change"),this}findByName(t){return t?this._routes.filter(e=>e.name===t)[0]:null}match(t){const e=v(t,!0),{pathname:r,query:n}=e;return this._routes.reduce((t,e)=>{if(t.route)return t;const s=e.match(r);return s?Object.assign(Object.assign({},t),{route:e,params:s,query:Object.assign(Object.assign({},n),s)}):t},{route:null,query:n,parsedUrl:e})}findAndGetUrls(t,e={}){const r=this.findByName(t);if(r)return{route:r,urls:r.getUrls(e),byName:!0};{const{route:e,query:r}=this.match(t),n=e?e.getHref(r):t;return{route:e,urls:{href:n,as:t},byName:!1}}}getRequestHandler(t,e=null){const r=t.getRequestHandler();return(n,s,o=null)=>{const{route:a,query:i,parsedUrl:h}=this.match(n.url);a?e?e({req:n,res:s,route:a,query:o?o({req:n,query:i,route:a}):i,parsedUrl:h}):t.render(n,s,a.page,o?o({req:n,query:i,route:a}):i,h):r(n,s,h)}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function D(r,n=null){const s=n||e;return function(e){const{route:n,params:o,to:a}=e,i=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]])}return r}(e,["route","params","to"]),h=n||a,u=function(e,r,n={}){const s=r?e.findAndGetUrls(r,n):{route:null,urls:{as:"",href:""},byName:!1},[o,a]=t.useState(s.urls);return t.useEffect(()=>{const t=e.on("change",()=>{const t=r?e.findAndGetUrls(r,n):{route:null,urls:{as:"",href:""},byName:!1};t.urls&&o.as===t.urls.as&&o.href===t.urls.href||a(t.urls)});return()=>{t()}},[]),s}(r,h,o);let f=i;return u&&Object.assign(f,u.urls),f.href||(f.href=h),f.params||(f.params=o),t.createElement(s,Object.assign({},f))}}export default t=>{const{Link:e=null,Router:s=null}=t||{},o=new M,a=function(t){return()=>{const e=n();return{matches:t.findAndGetUrls(e.asPath,e.query)}}}(o),i=D(o,e),h=function(t,e=null){const n=e||r,s=Object.assign({},n),o=e=>(r,s,o)=>{const a=n[e];if(a){const{byName:e,urls:{as:n,href:i}}=t.findAndGetUrls(r,s);return a(i,n,e?o:s)}};return s.pushRoute=o("push"),s.replaceRoute=o("replace"),s.prefetchRoute=o("prefetch"),s}(o,s);return{registry:o,Link:i,Router:h,useRouteRegistry:a}};export{S as Route,H as toQuerystring};
//# sourceMappingURL=index.es.min.js.map
