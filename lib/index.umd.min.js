!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("next/link"),require("next/router")):"function"==typeof define&&define.amd?define(["exports","react","next/link","next/router"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["next-dynamic-routes"]={},e.React,e.OriginalNextLink,e.OriginalNextRouter)}(this,(function(e,t,r,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e,t){return e(t={exports:{}},t.exports),t.exports}var a=o((function(e,t){!function(r){var n=t&&!t.nodeType&&t,o=e&&!e.nodeType&&e,a="object"==typeof s&&s;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var i,h,u=2147483647,f=/^xn--/,p=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,d=String.fromCharCode;function y(e){throw RangeError(c[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function g(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+v((e=e.replace(l,".")).split("."),t).join(".")}function x(e){for(var t,r,n=[],s=0,o=e.length;s<o;)(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<o?56320==(64512&(r=e.charCodeAt(s++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),s--):n.push(t);return n}function b(e){return v(e,(function(e){var t="";return e>65535&&(t+=d((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=d(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=36)e=m(e/35);return m(n+36*e/(e+38))}function j(e){var t,r,n,s,o,a,i,h,f,p,l,c=[],d=e.length,v=0,g=128,x=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&y("not-basic"),c.push(e.charCodeAt(n));for(s=r>0?r+1:0;s<d;){for(o=v,a=1,i=36;s>=d&&y("invalid-input"),((h=(l=e.charCodeAt(s++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:36)>=36||h>m((u-v)/a))&&y("overflow"),v+=h*a,!(h<(f=i<=x?1:i>=x+26?26:i-x));i+=36)a>m(u/(p=36-f))&&y("overflow"),a*=p;x=w(v-o,t=c.length+1,0==o),m(v/t)>u-g&&y("overflow"),g+=m(v/t),v%=t,c.splice(v++,0,g)}return b(c)}function E(e){var t,r,n,s,o,a,i,h,f,p,l,c,v,g,b,j=[];for(c=(e=x(e)).length,t=128,r=0,o=72,a=0;a<c;++a)(l=e[a])<128&&j.push(d(l));for(n=s=j.length,s&&j.push("-");n<c;){for(i=u,a=0;a<c;++a)(l=e[a])>=t&&l<i&&(i=l);for(i-t>m((u-r)/(v=n+1))&&y("overflow"),r+=(i-t)*v,t=i,a=0;a<c;++a)if((l=e[a])<t&&++r>u&&y("overflow"),l==t){for(h=r,f=36;!(h<(p=f<=o?1:f>=o+26?26:f-o));f+=36)b=h-p,g=36-p,j.push(d(O(p+b%g,0))),h=m(b/g);j.push(d(O(h,0))),o=w(r,v,n==s),r=0,++n}++r,++t}return j.join("")}if(i={version:"1.3.2",ucs2:{decode:x,encode:b},decode:j,encode:E,toASCII:function(e){return g(e,(function(e){return p.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return g(e,(function(e){return f.test(e)?j(e.slice(4).toLowerCase()):e}))}},n&&o)if(e.exports==n)o.exports=i;else for(h in i)i.hasOwnProperty(h)&&(n[h]=i[h]);else r.punycode=i}(s)})),i=function(e){return"string"==typeof e},h=function(e){return"object"==typeof e&&null!==e},u=function(e){return null===e},f=function(e){return null==e};function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var l=function(e,t,r,n){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var i=e.length;a>0&&i>a&&(i=a);for(var h=0;h<i;++h){var u,f,l,c,m=e[h].replace(o,"%20"),d=m.indexOf(r);d>=0?(u=m.substr(0,d),f=m.substr(d+1)):(u=m,f=""),l=decodeURIComponent(u),c=decodeURIComponent(f),p(s,l)?Array.isArray(s[l])?s[l].push(c):s[l]=[s[l],c]:s[l]=c}return s},c=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},m=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(n){var s=encodeURIComponent(c(n))+r;return Array.isArray(e[n])?e[n].map((function(e){return s+encodeURIComponent(c(e))})).join(t):s+encodeURIComponent(c(e[n]))})).join(t):n?encodeURIComponent(c(n))+r+encodeURIComponent(c(e)):""},d=o((function(e,t){t.decode=t.parse=l,t.encode=t.stringify=m})),y=(d.decode,d.parse,d.encode,d.stringify,P);function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var g=/^([a-z0-9.+-]+:)/i,x=/:[0-9]*$/,b=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,O=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),w=["'"].concat(O),j=["%","/","?",";","#"].concat(w),E=["/","?","#"],A=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,C={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},I={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function P(e,t,r){if(e&&h(e)&&e instanceof v)return e;var n=new v;return n.parse(e,t,r),n}function T(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var s=1,o="";if("?"===e[i=r+1])throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;)if("\\"!==e[i]){if(")"===e[i]){if(0===--s){i++;break}}else if("("===e[i]&&(s++,"?"!==e[i+1]))throw new TypeError("Capturing groups are not allowed at "+i);o+=e[i++]}else o+=e[i++]+e[i++];if(s)throw new TypeError("Unbalanced pattern at "+r);if(!o)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:o}),r=i}else{for(var a="",i=r+1;i<e.length;){var h=e.charCodeAt(i);if(!(h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||95===h))break;a+=e[i++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=i}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,s=void 0===n?"./":n,o="[^"+N(t.delimiter||"/#?")+"]+?",a=[],i=0,h=0,u="",f=function(e){if(h<r.length&&r[h].type===e)return r[h++].value},p=function(e){var t=f(e);if(void 0!==t)return t;var n=r[h],s=n.type,o=n.index;throw new TypeError("Unexpected "+s+" at "+o+", expected "+e)},l=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t};h<r.length;){var c=f("CHAR"),m=f("NAME"),d=f("PATTERN");if(m||d){var y=c||"";-1===s.indexOf(y)&&(u+=y,y=""),u&&(a.push(u),u=""),a.push({name:m||i++,prefix:y,suffix:"",pattern:d||o,modifier:f("MODIFIER")||""})}else{var v=c||f("ESCAPED_CHAR");if(v)u+=v;else if(u&&(a.push(u),u=""),f("OPEN")){y=l();var g=f("NAME")||"",x=f("PATTERN")||"",b=l();p("CLOSE"),a.push({name:g||(x?i++:""),pattern:g&&!x?o:x,prefix:y,suffix:b,modifier:f("MODIFIER")||""})}else p("END")}}return a}function U(e,t){return function(e,t){void 0===t&&(t={});var r=k(t),n=t.encode,s=void 0===n?function(e){return e}:n,o=t.validate,a=void 0===o||o,i=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o){var h=t?t[o.name]:void 0,u="?"===o.modifier||"*"===o.modifier,f="*"===o.modifier||"+"===o.modifier;if(Array.isArray(h)){if(!f)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===h.length){if(u)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var p=0;p<h.length;p++){var l=s(h[p],o);if(a&&!i[n].test(l))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+l+'"');r+=o.prefix+l+o.suffix}}else if("string"!=typeof h&&"number"!=typeof h){if(!u){var c=f?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+c)}}else{l=s(String(h),o);if(a&&!i[n].test(l))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+l+'"');r+=o.prefix+l+o.suffix}}else r+=o}return r}}(T(e,t),t)}function N(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function k(e){return e&&e.sensitive?"":"i"}function $(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,s=void 0!==n&&n,o=r.start,a=void 0===o||o,i=r.end,h=void 0===i||i,u=r.encode,f=void 0===u?function(e){return e}:u,p="["+N(r.endsWith||"")+"]|$",l="["+N(r.delimiter||"/#?")+"]",c=a?"^":"",m=0,d=e;m<d.length;m++){var y=d[m];if("string"==typeof y)c+=N(f(y));else{var v=N(f(y.prefix)),g=N(f(y.suffix));if(y.pattern)if(t&&t.push(y),v||g)if("+"===y.modifier||"*"===y.modifier){var x="*"===y.modifier?"?":"";c+="(?:"+v+"((?:"+y.pattern+")(?:"+g+v+"(?:"+y.pattern+"))*)"+g+")"+x}else c+="(?:"+v+"("+y.pattern+")"+g+")"+y.modifier;else c+="("+y.pattern+")"+y.modifier;else c+="(?:"+v+g+")"+y.modifier}}if(h)s||(c+=l+"?"),c+=r.endsWith?"(?="+p+")":"$";else{var b=e[e.length-1],O="string"==typeof b?l.indexOf(b[b.length-1])>-1:void 0===b;s||(c+="(?:"+l+"(?="+p+"))?"),O||(c+="(?="+l+"|"+p+")")}return new RegExp(c,k(r))}(T(e,r),t,r)}function _(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return _(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",k(r))}(e,t,r):$(e,t,r)}v.prototype.parse=function(e,t,r){if(!i(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(s);o[0]=o[0].replace(/\\/g,"/");var h=e=o.join(s);if(h=h.trim(),!r&&1===e.split("#").length){var u=b.exec(h);if(u)return this.path=h,this.href=h,this.pathname=u[1],u[2]?(this.search=u[2],this.query=t?d.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=g.exec(h);if(f){var p=(f=f[0]).toLowerCase();this.protocol=p,h=h.substr(f.length)}if(r||f||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===h.substr(0,2);!l||f&&q[f]||(h=h.substr(2),this.slashes=!0)}if(!q[f]&&(l||f&&!I[f])){for(var c,m,y=-1,v=0;v<E.length;v++){-1!==(x=h.indexOf(E[v]))&&(-1===y||x<y)&&(y=x)}-1!==(m=-1===y?h.lastIndexOf("@"):h.lastIndexOf("@",y))&&(c=h.slice(0,m),h=h.slice(m+1),this.auth=decodeURIComponent(c)),y=-1;for(v=0;v<j.length;v++){var x;-1!==(x=h.indexOf(j[v]))&&(-1===y||x<y)&&(y=x)}-1===y&&(y=h.length),this.host=h.slice(0,y),h=h.slice(y),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var P=this.hostname.split(/\./),T=(v=0,P.length);v<T;v++){var U=P[v];if(U&&!U.match(A)){for(var N="",k=0,$=U.length;k<$;k++)U.charCodeAt(k)>127?N+="x":N+=U[k];if(!N.match(A)){var _=P.slice(0,v),H=P.slice(v+1),M=U.match(R);M&&(_.push(M[1]),H.unshift(M[2])),H.length&&(h="/"+H.join(".")+h),this.hostname=_.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=a.toASCII(this.hostname));var S=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+S,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!C[p])for(v=0,T=w.length;v<T;v++){var F=w[v];if(-1!==h.indexOf(F)){var L=encodeURIComponent(F);L===F&&(L=escape(F)),h=h.split(F).join(L)}}var B=h.indexOf("#");-1!==B&&(this.hash=h.substr(B),h=h.slice(0,B));var z=h.indexOf("?");if(-1!==z?(this.search=h.substr(z),this.query=h.substr(z+1),t&&(this.query=d.parse(this.query)),h=h.slice(0,z)):t&&(this.search="",this.query={}),h&&(this.pathname=h),I[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var G=this.search||"";this.path=S+G}return this.href=this.format(),this},v.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(o=d.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||I[t])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+s+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},v.prototype.resolve=function(e){return this.resolveObject(P(e,!1,!0)).format()},v.prototype.resolveObject=function(e){if(i(e)){var t=new v;t.parse(e,!1,!0),e=t}for(var r=new v,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),h=0;h<a.length;h++){var p=a[h];"protocol"!==p&&(r[p]=e[p])}return I[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!I[e.protocol]){for(var l=Object.keys(e),c=0;c<l.length;c++){var m=l[c];r[m]=e[m]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||q[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var y=r.pathname||"",g=r.search||"";r.path=y+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var x=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),O=b||x||r.host&&e.pathname,w=O,j=r.pathname&&r.pathname.split("/")||[],E=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!I[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===j[0]?j[0]=r.host:j.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),O=O&&(""===d[0]||""===j[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,j=d;else if(d.length)j||(j=[]),j.pop(),j=j.concat(d),r.search=e.search,r.query=e.query;else if(!f(e.search)){if(E)r.hostname=r.host=j.shift(),(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift());return r.search=e.search,r.query=e.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!j.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=j.slice(-1)[0],R=(r.host||e.host||j.length>1)&&("."===A||".."===A)||""===A,C=0,P=j.length;P>=0;P--)"."===(A=j[P])?j.splice(P,1):".."===A?(j.splice(P,1),C++):C&&(j.splice(P,1),C--);if(!O&&!w)for(;C--;C)j.unshift("..");!O||""===j[0]||j[0]&&"/"===j[0].charAt(0)||j.unshift(""),R&&"/"!==j.join("/").substr(-1)&&j.push("");var T,U=""===j[0]||j[0]&&"/"===j[0].charAt(0);E&&(r.hostname=r.host=U?"":j.length?j.shift():"",(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift()));return(O=O||r.host&&j.length)&&!U&&j.unshift(""),j.length?r.pathname=j.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},v.prototype.parseHost=function(){var e=this.host,t=x.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const H=e=>Object.keys(e).filter(t=>null!==e[t]&&void 0!==e[t]).map(t=>{let r=e[t];return Array.isArray(r)&&(r=r.join("/")),[encodeURIComponent(t),encodeURIComponent(r)].join("=")}).join("&");class M{constructor(e){const{name:t,pattern:r,page:n=t}=e;if(!t&&!n)throw new Error(`Missing page to render for route "${r}"`);this.name=t,n&&this.updatePage(n),r&&this.updatePattern(r)}updatePattern(e){this.pattern!==e&&(this.pattern=e||"/"+this.name,this.regex=_(this.pattern,this.keys=[]),this.keyNames=this.keys.map(e=>e.name),this.toPath=U(this.pattern))}updatePage(e=""){this.page!==e&&(this.page=(""+e).replace(/(^|\/)index$/,"").replace(/^\/?/,"/"))}match(e){const t=this.regex.exec(e);if(t)return this.valuesToParams(t.slice(1))}valuesToParams(e){return e.reduce((e,t,r)=>void 0===t?e:Object.assign(e,{[this.keys[r].name]:decodeURIComponent(t)}),{})}getHref(e={}){return`${this.page}?${H(e)}`}getAs(e={}){const t=this.toPath(e)||"/",r=Object.keys(e).filter(e=>-1===this.keyNames.indexOf(e));if(!r.length)return t;const n=r.reduce((t,r)=>Object.assign(t,{[r]:e[r]}),{});return`${t}?${H(n)}`}getUrls(e){return{as:this.getAs(e),href:this.getHref(e)}}}class S{constructor(){this._routes=[],this._routes=[]}get routes(){return this._routes}createOption(e,t,r){let n={},s=e;return e instanceof Object?s=n.name:("/"===e[0]&&(r=t,t=e,s=null),n={name:s,pattern:t,page:r}),n}add(e,t,r){const n=this.createOption(e,t,r);if(this.findByName(n.name))throw new Error(`Route "${n.name}" already exists`);return this._routes.push(new M(n)),this}set(e,t,r){const n=this.createOption(e,t,r),s=this.findByName(n.name);return s?(n.pattern&&s.updatePattern(n.pattern),n.page&&s.updatePage(n.page)):this._routes.push(new M(n)),this}findByName(e){return e?this._routes.filter(t=>t.name===e)[0]:null}match(e){const t=y(e,!0),{pathname:r,query:n}=t;return this._routes.reduce((e,t)=>{if(e.route)return e;const s=t.match(r);return s?Object.assign(Object.assign({},e),{route:t,params:s,query:Object.assign(Object.assign({},n),s)}):e},{route:null,query:n,parsedUrl:t})}findAndGetUrls(e,t={}){const r=this.findByName(e);if(r)return{route:r,urls:r.getUrls(t),byName:!0};{const{route:t,query:r}=this.match(e),n=t?t.getHref(r):e;return{route:t,urls:{href:n,as:e},byName:!1}}}getRequestHandler(e,t=null){const r=e.getRequestHandler();return(n,s)=>{const{route:o,query:a,parsedUrl:i}=this.match(n.url);o?t?t({req:n,res:s,route:o,query:a}):e.render(n,s,o.page,a):r(n,s,i)}}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function D(e,n=null){let s=n||r;return t.memo(r=>{const{route:n,params:o,to:a}=r,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(r,["route","params","to"]),h=n||a;return h&&Object.assign(i,e.findAndGetUrls(h,o).urls),t.createElement(s,i)})}function F(e,t=null){const r=t||n,s=Object.assign({},r),o=t=>(n,s,o)=>{const a=r[t];if(a){const{byName:t,urls:{as:r,href:i}}=e.findAndGetUrls(n,s);return a(i,r,t?o:s)}};return s.pushRoute=o("push"),s.replaceRoute=o("replace"),s.prefetchRoute=o("prefetch"),s}e.Route=M,e.default=e=>{const{Link:t=null,Router:r=null}=e||{},n=new S;return{registry:n,Link:D(n,t),Router:F(n,r)}},e.toQuerystring=H,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
