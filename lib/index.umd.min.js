!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("next/link"),require("next/router")):"function"==typeof define&&define.amd?define(["exports","react","next/link","next/router"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["next-routes-dynamic"]={},e.React,e.OriginalNextLink,e.OriginalNextRouter)}(this,(function(e,t,r,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var s="default"in n?n.default:n,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e,t){return e(t={exports:{}},t.exports),t.exports}var i=a((function(e,t){!function(r){var n=t&&!t.nodeType&&t,s=e&&!e.nodeType&&e,a="object"==typeof o&&o;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var i,h,u=2147483647,f=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,d=String.fromCharCode;function y(e){throw RangeError(p[e])}function g(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function v(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+g((e=e.replace(c,".")).split("."),t).join(".")}function b(e){for(var t,r,n=[],s=0,o=e.length;s<o;)(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<o?56320==(64512&(r=e.charCodeAt(s++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),s--):n.push(t);return n}function x(e){return g(e,(function(e){var t="";return e>65535&&(t+=d((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=d(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=36)e=m(e/35);return m(n+36*e/(e+38))}function j(e){var t,r,n,s,o,a,i,h,f,l,c,p=[],d=e.length,g=0,v=128,b=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&y("not-basic"),p.push(e.charCodeAt(n));for(s=r>0?r+1:0;s<d;){for(o=g,a=1,i=36;s>=d&&y("invalid-input"),((h=(c=e.charCodeAt(s++))-48<10?c-22:c-65<26?c-65:c-97<26?c-97:36)>=36||h>m((u-g)/a))&&y("overflow"),g+=h*a,!(h<(f=i<=b?1:i>=b+26?26:i-b));i+=36)a>m(u/(l=36-f))&&y("overflow"),a*=l;b=w(g-o,t=p.length+1,0==o),m(g/t)>u-v&&y("overflow"),v+=m(g/t),g%=t,p.splice(g++,0,v)}return x(p)}function E(e){var t,r,n,s,o,a,i,h,f,l,c,p,g,v,x,j=[];for(p=(e=b(e)).length,t=128,r=0,o=72,a=0;a<p;++a)(c=e[a])<128&&j.push(d(c));for(n=s=j.length,s&&j.push("-");n<p;){for(i=u,a=0;a<p;++a)(c=e[a])>=t&&c<i&&(i=c);for(i-t>m((u-r)/(g=n+1))&&y("overflow"),r+=(i-t)*g,t=i,a=0;a<p;++a)if((c=e[a])<t&&++r>u&&y("overflow"),c==t){for(h=r,f=36;!(h<(l=f<=o?1:f>=o+26?26:f-o));f+=36)x=h-l,v=36-l,j.push(d(O(l+x%v,0))),h=m(x/v);j.push(d(O(h,0))),o=w(r,g,n==s),r=0,++n}++r,++t}return j.join("")}if(i={version:"1.3.2",ucs2:{decode:b,encode:x},decode:j,encode:E,toASCII:function(e){return v(e,(function(e){return l.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return v(e,(function(e){return f.test(e)?j(e.slice(4).toLowerCase()):e}))}},n&&s)if(e.exports==n)s.exports=i;else for(h in i)i.hasOwnProperty(h)&&(n[h]=i[h]);else r.punycode=i}(o)})),h=function(e){return"string"==typeof e},u=function(e){return"object"==typeof e&&null!==e},f=function(e){return null===e},l=function(e){return null==e};function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var p=function(e,t,r,n){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var i=e.length;a>0&&i>a&&(i=a);for(var h=0;h<i;++h){var u,f,l,p,m=e[h].replace(o,"%20"),d=m.indexOf(r);d>=0?(u=m.substr(0,d),f=m.substr(d+1)):(u=m,f=""),l=decodeURIComponent(u),p=decodeURIComponent(f),c(s,l)?Array.isArray(s[l])?s[l].push(p):s[l]=[s[l],p]:s[l]=p}return s},m=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},d=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(n){var s=encodeURIComponent(m(n))+r;return Array.isArray(e[n])?e[n].map((function(e){return s+encodeURIComponent(m(e))})).join(t):s+encodeURIComponent(m(e[n]))})).join(t):n?encodeURIComponent(m(n))+r+encodeURIComponent(m(e)):""},y=a((function(e,t){t.decode=t.parse=p,t.encode=t.stringify=d})),g=(y.decode,y.parse,y.encode,y.stringify,k);function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var b=/^([a-z0-9.+-]+:)/i,x=/:[0-9]*$/,O=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,w=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),j=["'"].concat(w),E=["%","/","?",";","#"].concat(j),A=["/","?","#"],R=/^[+a-z0-9A-Z_-]{0,63}$/,C=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,"javascript:":!0},I={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function k(e,t,r){if(e&&u(e)&&e instanceof v)return e;var n=new v;return n.parse(e,t,r),n}function U(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var s=1,o="";if("?"===e[i=r+1])throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;)if("\\"!==e[i]){if(")"===e[i]){if(0===--s){i++;break}}else if("("===e[i]&&(s++,"?"!==e[i+1]))throw new TypeError("Capturing groups are not allowed at "+i);o+=e[i++]}else o+=e[i++]+e[i++];if(s)throw new TypeError("Unbalanced pattern at "+r);if(!o)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:o}),r=i}else{for(var a="",i=r+1;i<e.length;){var h=e.charCodeAt(i);if(!(h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||95===h))break;a+=e[i++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=i}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,s=void 0===n?"./":n,o="[^"+N(t.delimiter||"/#?")+"]+?",a=[],i=0,h=0,u="",f=function(e){if(h<r.length&&r[h].type===e)return r[h++].value},l=function(e){var t=f(e);if(void 0!==t)return t;var n=r[h],s=n.type,o=n.index;throw new TypeError("Unexpected "+s+" at "+o+", expected "+e)},c=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t};h<r.length;){var p=f("CHAR"),m=f("NAME"),d=f("PATTERN");if(m||d){var y=p||"";-1===s.indexOf(y)&&(u+=y,y=""),u&&(a.push(u),u=""),a.push({name:m||i++,prefix:y,suffix:"",pattern:d||o,modifier:f("MODIFIER")||""})}else{var g=p||f("ESCAPED_CHAR");if(g)u+=g;else if(u&&(a.push(u),u=""),f("OPEN")){y=c();var v=f("NAME")||"",b=f("PATTERN")||"",x=c();l("CLOSE"),a.push({name:v||(b?i++:""),pattern:v&&!b?o:b,prefix:y,suffix:x,modifier:f("MODIFIER")||""})}else l("END")}}return a}function T(e,t){return function(e,t){void 0===t&&(t={});var r=_(t),n=t.encode,s=void 0===n?function(e){return e}:n,o=t.validate,a=void 0===o||o,i=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var o=e[n];if("string"!=typeof o){var h=t?t[o.name]:void 0,u="?"===o.modifier||"*"===o.modifier,f="*"===o.modifier||"+"===o.modifier;if(Array.isArray(h)){if(!f)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===h.length){if(u)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var l=0;l<h.length;l++){var c=s(h[l],o);if(a&&!i[n].test(c))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+c+'"');r+=o.prefix+c+o.suffix}}else if("string"!=typeof h&&"number"!=typeof h){if(!u){var p=f?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+p)}}else{c=s(String(h),o);if(a&&!i[n].test(c))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+c+'"');r+=o.prefix+c+o.suffix}}else r+=o}return r}}(U(e,t),t)}function N(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function _(e){return e&&e.sensitive?"":"i"}function $(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,s=void 0!==n&&n,o=r.start,a=void 0===o||o,i=r.end,h=void 0===i||i,u=r.encode,f=void 0===u?function(e){return e}:u,l="["+N(r.endsWith||"")+"]|$",c="["+N(r.delimiter||"/#?")+"]",p=a?"^":"",m=0,d=e;m<d.length;m++){var y=d[m];if("string"==typeof y)p+=N(f(y));else{var g=N(f(y.prefix)),v=N(f(y.suffix));if(y.pattern)if(t&&t.push(y),g||v)if("+"===y.modifier||"*"===y.modifier){var b="*"===y.modifier?"?":"";p+="(?:"+g+"((?:"+y.pattern+")(?:"+v+g+"(?:"+y.pattern+"))*)"+v+")"+b}else p+="(?:"+g+"("+y.pattern+")"+v+")"+y.modifier;else p+="("+y.pattern+")"+y.modifier;else p+="(?:"+g+v+")"+y.modifier}}if(h)s||(p+=c+"?"),p+=r.endsWith?"(?="+l+")":"$";else{var x=e[e.length-1],O="string"==typeof x?c.indexOf(x[x.length-1])>-1:void 0===x;s||(p+="(?:"+c+"(?="+l+"))?"),O||(p+="(?="+c+"|"+l+")")}return new RegExp(p,_(r))}(U(e,r),t,r)}function H(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return H(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",_(r))}(e,t,r):$(e,t,r)}v.prototype.parse=function(e,t,r){if(!h(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(s);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(s);if(a=a.trim(),!r&&1===e.split("#").length){var u=O.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=b.exec(a);if(f){var l=(f=f[0]).toLowerCase();this.protocol=l,a=a.substr(f.length)}if(r||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||f&&I[f]||(a=a.substr(2),this.slashes=!0)}if(!I[f]&&(c||f&&!P[f])){for(var p,m,d=-1,g=0;g<A.length;g++){-1!==(v=a.indexOf(A[g]))&&(-1===d||v<d)&&(d=v)}-1!==(m=-1===d?a.lastIndexOf("@"):a.lastIndexOf("@",d))&&(p=a.slice(0,m),a=a.slice(m+1),this.auth=decodeURIComponent(p)),d=-1;for(g=0;g<E.length;g++){var v;-1!==(v=a.indexOf(E[g]))&&(-1===d||v<d)&&(d=v)}-1===d&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var w=this.hostname.split(/\./),k=(g=0,w.length);g<k;g++){var U=w[g];if(U&&!U.match(R)){for(var T="",N=0,_=U.length;N<_;N++)U.charCodeAt(N)>127?T+="x":T+=U[N];if(!T.match(R)){var $=w.slice(0,g),H=w.slice(g+1),S=U.match(C);S&&($.push(S[1]),H.unshift(S[2])),H.length&&(a="/"+H.join(".")+a),this.hostname=$.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=i.toASCII(this.hostname));var M=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+M,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!q[l])for(g=0,k=j.length;g<k;g++){var F=j[g];if(-1!==a.indexOf(F)){var L=encodeURIComponent(F);L===F&&(L=escape(F)),a=a.split(F).join(L)}}var G=a.indexOf("#");-1!==G&&(this.hash=a.substr(G),a=a.slice(0,G));var B=a.indexOf("?");if(-1!==B?(this.search=a.substr(B),this.query=a.substr(B+1),t&&(this.query=y.parse(this.query)),a=a.slice(0,B)):t&&(this.search="",this.query={}),a&&(this.pathname=a),P[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var z=this.search||"";this.path=M+z}return this.href=this.format(),this},v.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||P[t])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+s+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},v.prototype.resolve=function(e){return this.resolveObject(k(e,!1,!0)).format()},v.prototype.resolveObject=function(e){if(h(e)){var t=new v;t.parse(e,!1,!0),e=t}for(var r=new v,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),i=0;i<a.length;i++){var u=a[i];"protocol"!==u&&(r[u]=e[u])}return P[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!P[e.protocol]){for(var c=Object.keys(e),p=0;p<c.length;p++){var m=c[p];r[m]=e[m]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||I[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var y=r.pathname||"",g=r.search||"";r.path=y+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),O=x||b||r.host&&e.pathname,w=O,j=r.pathname&&r.pathname.split("/")||[],E=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!P[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===j[0]?j[0]=r.host:j.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),O=O&&(""===d[0]||""===j[0])),x)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,j=d;else if(d.length)j||(j=[]),j.pop(),j=j.concat(d),r.search=e.search,r.query=e.query;else if(!l(e.search)){if(E)r.hostname=r.host=j.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift());return r.search=e.search,r.query=e.query,f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!j.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=j.slice(-1)[0],R=(r.host||e.host||j.length>1)&&("."===A||".."===A)||""===A,C=0,q=j.length;q>=0;q--)"."===(A=j[q])?j.splice(q,1):".."===A?(j.splice(q,1),C++):C&&(j.splice(q,1),C--);if(!O&&!w)for(;C--;C)j.unshift("..");!O||""===j[0]||j[0]&&"/"===j[0].charAt(0)||j.unshift(""),R&&"/"!==j.join("/").substr(-1)&&j.push("");var k,U=""===j[0]||j[0]&&"/"===j[0].charAt(0);E&&(r.hostname=r.host=U?"":j.length?j.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift()));return(O=O||r.host&&j.length)&&!U&&j.unshift(""),j.length?r.pathname=j.join("/"):(r.pathname=null,r.path=null),f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},v.prototype.parseHost=function(){var e=this.host,t=x.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const S=e=>Object.keys(e).filter(t=>null!==e[t]&&void 0!==e[t]).map(t=>{let r=e[t];return Array.isArray(r)&&(r=r.join("/")),[encodeURIComponent(t),encodeURIComponent(r)].join("=")}).join("&");class M{constructor(e){const{name:t,pattern:r,page:n=t}=e;if(!t&&!n)throw new Error(`Missing page to render for route "${r}"`);this.name=t,n&&this.updatePage(n),r&&this.updatePattern(r)}updatePattern(e){this.pattern!==e&&(this.pattern=e||"/"+this.name,this.regex=H(this.pattern,this.keys=[]),this.keyNames=this.keys.map(e=>e.name),this.toPath=T(this.pattern))}updatePage(e=""){this.page!==e&&(this.page=(""+e).replace(/(^|\/)index$/,"").replace(/^\/?/,"/"))}match(e){const t=this.regex.exec(e);if(t)return this.valuesToParams(t.slice(1))}valuesToParams(e){return e.reduce((e,t,r)=>void 0===t?e:Object.assign(e,{[this.keys[r].name]:decodeURIComponent(t)}),{})}getHref(e={}){return`${this.page}?${S(e)}`}getAs(e={}){const t=this.toPath(e)||"/",r=Object.keys(e).filter(e=>-1===this.keyNames.indexOf(e));if(!r.length)return t;const n=r.reduce((t,r)=>Object.assign(t,{[r]:e[r]}),{});return`${t}?${S(n)}`}getUrls(e){return{as:this.getAs(e),href:this.getHref(e)}}}class D{constructor(){this._routes=[],this._callbacks={},this._routes=[]}get routes(){return this._routes}on(e,t){return this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),()=>{this.off(e,t)}}off(e,t){const r=this._callbacks[e].findIndex(e=>e===t);r>=0&&(this._callbacks[e]=this._callbacks[e].splice(r,1))}emit(e,...t){const r=this._callbacks[e];r&&r.forEach(e=>e.call(null,t))}createOption(e,t,r){let n={},s=e;return e instanceof Object?s=n.name:("/"===e[0]&&(r=t,t=e,s=null),n={name:s,pattern:t,page:r}),n}add(e,t,r){const n=e instanceof Object?e:this.createOption(e,t,r);if(this.findByName(n.name))throw new Error(`Route "${n.name}" already exists`);return this._routes.push(new M(n)),this.emit("change"),this}set(e,t,r){const n=e instanceof Object?e:this.createOption(e,t,r),s=this.findByName(n.name);return s?(n.pattern&&s.updatePattern(n.pattern),n.page&&s.updatePage(n.page)):this._routes.push(new M(n)),this.emit("change"),this}findByName(e){return e?this._routes.filter(t=>t.name===e)[0]:null}match(e){const t=g(e,!0),{pathname:r,query:n}=t;return this._routes.reduce((e,t)=>{if(e.route)return e;const s=t.match(r);return s?Object.assign(Object.assign({},e),{route:t,params:s,query:Object.assign(Object.assign({},n),s)}):e},{route:null,query:n,parsedUrl:t})}findAndGetUrls(e,t={}){const r=this.findByName(e);if(r)return{route:r,urls:r.getUrls(t),byName:!0};{const{route:t,query:r}=this.match(e),n=t?t.getHref(r):e;return{route:t,urls:{href:n,as:e},byName:!1}}}getRequestHandler(e,t=null){const r=e.getRequestHandler();return(n,s,o=null)=>{const{route:a,query:i,parsedUrl:h}=this.match(n.url);a?t?t({req:n,res:s,route:a,query:o?o({req:n,query:i,route:a}):i,parsedUrl:h}):e.render(n,s,a.page,o?o({req:n,query:i,route:a}):i,h):r(n,s,h)}}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function F(e,n=null){const s=n||r;return function(r){const{route:n,params:o,to:a}=r,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(r,["route","params","to"]),h=n||a,u=function(e,r,n={}){const s=r?e.findAndGetUrls(r,n):{route:null,urls:{as:"",href:""},byName:!1},[o,a]=t.useState(s.urls);return t.useEffect(()=>{const t=e.on("change",()=>{const t=r?e.findAndGetUrls(r,n):{route:null,urls:{as:"",href:""},byName:!1};t.urls&&o.as===t.urls.as&&o.href===t.urls.href||a(t.urls)});return()=>{t()}},[]),s}(e,h,o);let f=i;return u&&Object.assign(f,u.urls),f.href||(f.href=h),f.params||(f.params=o),t.createElement(s,Object.assign({},f))}}e.Route=M,e.default=e=>{const{Link:t=null,Router:r=null}=e||{},o=new D,a=function(e){return()=>{const t=n.useRouter();return{matches:e.findAndGetUrls(t.asPath,t.query)}}}(o),i=F(o,t),h=function(e,t=null){const r=t||s,n=Object.assign({},r),o=t=>(n,s,o)=>{const a=r[t];if(a){const{byName:t,urls:{as:r,href:i}}=e.findAndGetUrls(n,s);return a(i,r,t?o:s)}};return n.pushRoute=o("push"),n.replaceRoute=o("replace"),n.prefetchRoute=o("prefetch"),n}(o,r);return{registry:o,Link:i,Router:h,useRouteRegistry:a}},e.toQuerystring=S,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
